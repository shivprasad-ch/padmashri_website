{% extends 'base.html' %}
{% load static %}

{% block content %}
<div class="container py-5">

    <!-- üè† Hero Section -->
    <section id="hero" class="text-center mb-5">
        <img src="{{ nominee.photo.url }}" alt="Nominee Photo" class="img-fluid rounded-circle mb-3" style="max-height: 250px;">
        <h1 class="display-4 fw-bold">Padma Shri Nomination Profile</h1>
        <h2 class="text-muted">Dr. {{ nominee.full_name }}</h2>
        <p class="lead fst-italic">A Lifetime Dedicated to {{ nominee.tagline }}</p>
        {% if nominee.dossier_pdf %}
        <a href="{{ nominee.dossier_pdf.url }}" class="btn btn-lg btn-primary mt-3">üì• Full PDF Dossier</a>
        {% endif %}
    </section>

    <!-- üë§ Biography -->
    <section id="bio" class="mb-5">
        <h2 class="text-dark border-bottom pb-2">Biography</h2>
        <p class="text-muted fs-5">{{ nominee.bio|linebreaks }}</p>
        <p class="fw-semibold">Field of Work: {{ nominee.field_of_work }}</p>
        <p class="fw-semibold">Impact Numbers: {{ nominee.impact_numbers }}</p>
    </section>

    <!-- üìÖ Contribution Highlights -->
    <section id="contributions" class="mb-5">
        <h2 class="text-success border-bottom pb-2">Contribution Highlights</h2>
        <ul class="list-group mb-4">
            {% for contribution in contributions %}
            <li class="list-group-item">
                <a href="{% url 'contribution_detail' contribution.pk %}">
                    <strong>{{ contribution.year }}</strong> ‚Äî {{ contribution.title }}
                </a>
            </li>
            {% endfor %}
        </ul>
    </section>

    <!-- üèÖ Achievements & Recognition -->
    <section id="achievements" class="mb-5">
        <h2 class="text-primary border-bottom pb-2">Achievements & Recognition</h2>
        <ul class="list-group">
            {% for achievement in achievements %}
            <li class="list-group-item">
                <a href="{% url 'achievement_detail' achievement.pk %}">
                    <strong>{{ achievement.title }}</strong> ({{ achievement.year }})
                </a>
            </li>
            {% endfor %}
        </ul>
    </section>

    <!-- üìÇ Documents -->
    <section id="documents" class="mb-5">
        <h2 class="text-dark border-bottom pb-2">Documents</h2>
        <ul class="list-group">
            {% for document in documents %}
            <li class="list-group-item">
                <a href="{% url 'document_detail' document.pk %}">
                    üìÑ {{ document.doc_type|capfirst }}
                </a>
            </li>
            {% endfor %}
        </ul>
    </section>

    <!-- üñºÔ∏è Media Gallery -->
    <section id="gallery" class="mb-5">
        <h2 class="text-info border-bottom pb-2">Media Gallery</h2>
        <ul class="list-group">
            {% for media in media_files %}
            <li class="list-group-item">
                <a href="{% url 'media_detail' media.pk %}">
                    üéûÔ∏è {{ media.file_type|capfirst }}
                </a>
            </li>
            {% endfor %}
        </ul>
    </section>

    <!-- üí¨ Testimonials -->
    <section id="testimonials" class="mb-5">
        <h2 class="text-secondary border-bottom pb-2">Testimonials</h2>
        <div class="row">
            {% for testimonial in testimonials %}
            <div class="col-md-6 mb-3">
                <div class="border rounded p-3 shadow-sm">
                    <p>"{{ testimonial.quote }}"</p>
                    <p class="text-end fw-semibold">- {{ testimonial.person_name }}</p>
                </div>
            </div>
            {% endfor %}
        </div>
    </section>

    <!-- ‚úâÔ∏è Contact -->
    <section id="contact" class="mb-5">
        <h2 class="text-dark border-bottom pb-2">Contact</h2>
        <p>For more information or to verify this profile, contact:</p>
        <ul>
            {% if contact.email %}
            <li>Email: <a href="mailto:{{ contact.email }}">{{ contact.email }}</a></li>
            {% endif %}
            {% if contact.phone %}
            <li>Phone/WhatsApp: {{ contact.phone }}</li>
            {% endif %}
        </ul>
        <a href="{% url 'contact_form' %}" class="btn btn-outline-dark">Request More Information</a>
    </section>

    <!-- üì¶ Download All ZIP + QR Code -->
    <section class="text-center mb-5">
        <img src="{{ nominee.qr_code.url }}" alt="QR Code" class="mb-3" style="max-height: 150px;">
        <div>
            <a href="{% url 'download_zip' %}" class="btn btn-lg btn-dark">üì¶ Download All Files as ZIP</a>
        </div>
    </section>

    <!-- üîö Footer -->
    <footer class="text-center pt-4 border-top">
        <p class="small text-muted">This page is created to help interested authorities and individuals access information about the nominee for Padma Shri nomination purposes.</p>
        <p class="small text-muted">Last updated: {{ nominee.last_updated }}</p>
    </footer>

</div>
{% endblock %}